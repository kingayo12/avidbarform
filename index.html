<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Job Application Form</title>
    <!-- <link rel="stylesheet" href="sts.css"> -->
    <link rel="stylesheet" href="carrers.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script>
        if (!('mediaDevices' in navigator) || !('getUserMedia' in navigator.mediaDevices)) {
            alert('Camera API is not available in your browser');
        }
    </script>

</head>

<body>
    <nav class="navbar">
        <div class="navbar-logo">
            <img src="./logo.png" alt="">
        </div>
        <ul class="navbar-links">
            <li><a href="#">Career</a></li>
            <li><a href="#">Contact Us</a></li>
        </ul>
        <div class="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </nav>
    <div class="container_wrapper">

        <div class="side_art">
            <h2>C</h2>
            <h2>A</h2>
            <h2>V</h2>
            <h2>I</h2>
            <h2>D</h2>
            <h2>U</h2>
            <h2>S</h2>
        </div>
        <div class="form_wrapper">
            <h2> Application Form</h2>
            <div class="progressbar">
                <div class="progress" id="progress"></div>
                <div class="progress-step progress-step-active" data-title="Picture"></div>
                <div class="progress-step" data-title="Names & Contact"></div>
                <div class="progress-step" data-title="Address & Position"></div>
                <div class="progress-step" data-title="Languages & Qualification"></div>
                <div class="progress-step" data-title="Experience"></div>
            </div>
            <form id="jobForm">

                <div class="form-step active">
                    <div class="form-group pf">
                        <div class="potrait_view">
                            <div class="view" id="portrait-view"></div>
                            <div class="profile_valid">
                                <label for="portrait" class="required">Portrait Picture (Max 1MB):</label>
                            </div>
                        </div>
                        <div class="prt">
                            <div class="wrppf">
                                <input type="file" id="portrait" name="portrait" accept="image/*" required>
                                <button type="button" id="camera-button">Take Picture</button>
                                <video id="camera-preview" autoplay></video>
                            </div>
                        </div>
                    </div>
                    <div class="button-container">
                        <button type="button" class="next-step btn-next">Next</button>
                    </div>
                </div>

                <div class="form-step">
                    <div class="form-group">
                        <label for="surname" class="required">Surname:</label>
                        <input type="text" id="surname" name="surname" required>
                    </div>
                    <div class="form-group">
                        <label for="firstName" class="required">First Name:</label>
                        <input type="text" id="firstName" name="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="otherNames">Other Names:</label>
                        <input type="text" id="otherNames" name="otherNames">
                    </div>
                    <div class="flex_d">
                        <div class="form-group col-3">
                            <label for="dob" class="required">Date of Birth:</label>
                            <input type="date" id="dob" name="dob" required>
                        </div>
                        <div class="form-group col-3">
                            <label for="phone" class="required">Phone Number:</label>
                            <input type="tel" id="phone" name="phone" required>
                        </div>
                        <div class="form-group col-3">
                            <label for="email" class="required">Email:</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                    </div>
                    <div class="button-container">
                        <button type="button" class="prev-step btn-prev">Previous</button>
                        <button type="button" class="next-step btn-next">Next</button>
                    </div>
                </div>

                <div class="form-step">
                    <div class="form-group">
                        <label for="address" class="required">Current Address:</label>
                        <textarea id="address" name="address" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="position" class="required">Position Applied For:</label>
                        <select id="position" name="position" required>
                            <option value="">Select Position</option>
                            <option value="Waitress">Waitress</option>
                            <option value="Bar Man">Bar Man</option>
                            <option value="DJ">DJ</option>
                            <option value="Manager">Manager</option>
                        </select>
                    </div>
                    <div class="button-container">
                        <button type="button" class="prev-step btn-prev">Previous</button>
                        <button type="button" class="next-step btn-next">Next</button>
                    </div>
                </div>

                <div class="form-step">
                    <div class="form-group lang_wrapper">
                        <label class="required">Languages:</label>
                        <div class="lang">
                            <div class="wrp"> <input type="checkbox" id="english" name="languages" value="English">
                                <label for="english">English</label>
                            </div>
                            <div class="wrp"> <input type="checkbox" id="yoruba" name="languages" value="Yoruba">
                                <label for="yoruba">Yoruba</label>
                            </div>
                            <div class="wrp"><input type="checkbox" id="igbo" name="languages" value="Igbo">
                                <label for="igbo">Igbo</label>
                            </div>
                            <div class="wrp"> <input type="checkbox" id="hausa" name="languages" value="Hausa">
                                <label for="hausa">Hausa</label>
                            </div>
                            <div class="wrp"><input type="checkbox" id="others" name="languages" value="Others"><label
                                    for="others">Others (Specify):</label></div>
                        </div>
                        <input type="text" id="others_specify" name="others_specify"
                            placeholder="Specify other languages">
                    </div>
                    <div class="form-group">
                        <label for="qualification" class="required">Highest Educational Qualification:</label>
                        <select id="qualification" name="qualification" required>
                            <option value="">Select Qualification</option>
                            <option value="High School">High School</option>
                            <option value="Diploma">Diploma</option>
                            <option value="Bachelor's Degree">Bachelor's Degree</option>
                            <option value="Master's Degree">Master's Degree</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>
                    <div class="button-container">
                        <button type="button" class="prev-step btn-prev">Previous</button>
                        <button type="button" class="next-step btn-next">Next</button>
                    </div>
                </div>

                <div class="form-step">
                    <div class="form-group">
                        <label for="experience">Skills and Experience (Max 500 characters):</label>
                        <textarea id="experience" name="experience" maxlength="500"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="cv">CV Attachment (Optional):</label>
                        <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx">
                    </div>
                    <div class="form-group">
                        <label for="otherAttachment">Other Attachment (Optional):</label>
                        <input type="file" id="otherAttachment" name="otherAttachment"
                            accept=".pdf,.doc,.docx, image/*">
                    </div>
                    <div class="button-container">
                        <button type="button" class="prev-step btn-prev">Previous</button>
                        <button type="submit">Submit</button>
                    </div>
                </div>

                <div class="form-step">
                    <p>Thank you for your submission.</p>
                </div>

                <div class="form-group">
                    <p id="error-message"></p>
                </div>
            </form>
        </div>
    </div>






    <script>
        const form = document.getElementById('jobForm');
        const progress = document.getElementById("progress");
        const steps = document.querySelectorAll('.form-step');
        const prevBtns = document.querySelectorAll(".btn-prev");
        const nextBtns = document.querySelectorAll(".btn-next");
        const progressSteps = document.querySelectorAll(".progress-step");
        const portraitInput = document.getElementById('portrait');
        const cameraButton = document.getElementById('camera-button');
        const cameraPreview = document.getElementById('camera-preview');
        const portraitView = document.getElementById('portrait-view');
        const errorMessage = document.getElementById('error-message');
        const navbarLinks = document.querySelector('.navbar-links');
        const hamburger = document.querySelector('.hamburger');


        let formStepsNum = 0;

        nextBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                if (validateCurrentStep()) {
                    formStepsNum++;
                    updateFormSteps();
                    updateProgressbar();
                }
            });
        });

        prevBtns.forEach((btn) => {
            btn.addEventListener("click", () => {
                formStepsNum--;
                updateFormSteps();
                updateProgressbar();
            });
        });

        function updateFormSteps() {
            steps.forEach((formStep) => {
                formStep.classList.contains("active") &&
                    formStep.classList.remove("active");
            });

            steps[formStepsNum].classList.add("active");
        }

        function updateProgressbar() {
            progressSteps.forEach((progressStep, idx) => {
                if (idx < formStepsNum + 1) {
                    progressStep.classList.add("progress-step-active");
                } else {
                    progressStep.classList.remove("progress-step-active");
                }
            });

            const progressActive = document.querySelectorAll(".progress-step-active");

            progress.style.width =
                ((progressActive.length - 1) / (progressSteps.length - 1)) * 100 + "%";
        }


        function validateCurrentStep() {
            if (formStepsNum === 0) { // Portrait step
                if (!portraitInput.files || portraitInput.files.length === 0) {
                    errorMessage.textContent = "Please upload a portrait picture.";
                    return false;
                } else if (portraitInput.files[0].size > 1000000) {
                    errorMessage.textContent = "Portrait picture must be 1MB or less.";
                    return false;
                }
            }
            if (formStepsNum === 1) {
                const surname = document.getElementById('surname').value;
                const firstName = document.getElementById('firstName').value;
                const dob = document.getElementById('dob').value;
                const phone = document.getElementById('phone').value;
                const email = document.getElementById('email').value;
                if (!surname || !firstName || !dob || !phone || !email) {
                    errorMessage.textContent = "Please enter your Surname, First Name, Date of Birth, Phone Number and Email.";
                    return false;
                }
            }
            if (formStepsNum === 2) {
                const address = document.getElementById('address').value;
                const position = document.getElementById('position').value;
                if (!address || !position) {
                    errorMessage.textContent = "Please enter your Address and Position.";
                    return false;
                }
            }
            if (formStepsNum === 3) {
                const language = document.querySelector('input[name="languages"]:checked');
                const qualification = document.getElementById('qualification').value;
                if (!language || !qualification) {
                    errorMessage.textContent = "Please select a Language and Qualification.";
                    return false;
                }
            }
            errorMessage.textContent = "";
            return true;
        }

        cameraButton.addEventListener('click', async function () {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                cameraPreview.srcObject = stream;
                cameraPreview.style.display = 'block';

                const capture = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = cameraPreview.videoWidth;
                    canvas.height = cameraPreview.videoHeight;
                    const context = canvas.getContext('2d');
                    context.drawImage(cameraPreview, 0, 0, canvas.width, canvas.height);
                    canvas.toBlob((blob) => {
                        const file = new File([blob], 'captured.jpg', { type: 'image/jpeg' });
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        portraitInput.files = dataTransfer.files;
                        displayImage(file);
                        cameraPreview.srcObject.getVideoTracks().forEach(track => track.stop());
                        cameraPreview.style.display = 'none';
                        document.body.removeChild(captureButton);
                    }, 'image/jpeg');
                };

                const captureButton = document.createElement('button');
                captureButton.textContent = 'Capture';
                captureButton.addEventListener('click', capture);
                cameraPreview.parentNode.insertBefore(captureButton, cameraPreview.nextSibling);



            } catch (err) {
                console.error('Error accessing camera:', err);
                alert('Could not access camera.');
            }
        });

        portraitInput.addEventListener('change', function (event) {
            const file = event.target.files[0];
            displayImage(file)
        });

        function displayImage(file) {
            const reader = new FileReader();
            reader.onload = function (e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                portraitView.innerHTML = '';
                portraitView.appendChild(img);
            };
            reader.readAsDataURL(file);
        }

        form.addEventListener('submit', function (event) {
            if (!validateCurrentStep()) {
                event.preventDefault();
            } else {
                alert('Form submitted successfully!');
            }
        });

        updateFormSteps();
        updateProgressbar();

        // Hamburger menu functionality
        hamburger.addEventListener('click', () => {
            navbarLinks.classList.toggle('active');
            hamburger.classList.toggle('active');
        });
    </script>
</body>

</html>