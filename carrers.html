<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Job Application Form</title>
    <link rel="stylesheet" href="carrers.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <script>
        if (!('mediaDevices' in navigator) || !('getUserMedia' in navigator.mediaDevices)) {
            alert('Camera API is not available in your browser');
        }
    </script>

</head>

<body>

    <div class="form_wrapper">
        <h2>Job Application Form</h2>

        <form id="jobForm">

            <div class="form-group pf">
                <div class="potrait_view">
                    <div class="view" id="portrait-view"></div>
                    <div class="profile_valid">
                        <label for="portrait" class="required">Portrait Picture (Max 1MB):</label>
                    </div>
                </div>

                <div class="wrppf">
                    <input type="file" id="portrait" name="portrait" accept="image/*" required>
                    <button type="button" id="camera-button">Take Picture</button>
                    <video id="camera-preview" autoplay></video>
                </div>

            </div>

            <div class="form-group">
                <label for="surname" class="required">Surname:</label>
                <input type="text" id="surname" name="surname" required>
            </div>

            <div class="form-group">
                <label for="firstName" class="required">First Name:</label>
                <input type="text" id="firstName" name="firstName" required>
            </div>

            <div class="form-group">
                <label for="otherNames">Other Names:</label>
                <input type="text" id="otherNames" name="otherNames">
            </div>

            <div class="flex_d">
                <div class="form-group col-3">
                    <label for="dob" class="required">Date of Birth:</label>
                    <input type="date" id="dob" name="dob" required>
                </div>
                <div class="form-group col-3">
                    <label for="phone" class="required">Phone Number:</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div class="form-group col-3">
                    <label for="email" class="required">Email:</label>
                    <input type="email" id="email" name="email" required>
                </div>
            </div>




            <div class="form-group">
                <label for="address" class="required">Current Address:</label>
                <textarea id="address" name="address" required></textarea>
            </div>

            <div class="form-group">
                <label for="position" class="required">Position Applied For:</label>
                <select id="position" name="position" required>
                    <option value="">Select Position</option>
                    <option value="Waitress">Waitress</option>
                    <option value="Bar Man">Bar Man</option>
                    <option value="DJ">DJ</option>
                    <option value="Manager">Manager</option>
                </select>
            </div>

            <div class="form-group lang_wrapper">
                <label class="required">Languages:</label>
                <div class="lang">
                    <div class="wrp"> <input type="checkbox" id="english" name="languages" value="English">
                        <label for="english">English</label>
                    </div>

                    <div class="wrp"> <input type="checkbox" id="yoruba" name="languages" value="Yoruba">
                        <label for="yoruba">Yoruba</label>
                    </div>

                    <div class="wrp"><input type="checkbox" id="igbo" name="languages" value="Igbo">
                        <label for="igbo">Igbo</label>
                    </div>

                    <div class="wrp"> <input type="checkbox" id="hausa" name="languages" value="Hausa">
                        <label for="hausa">Hausa</label>
                    </div>


                    <div class="wrp"><input type="checkbox" id="others" name="languages" value="Others"><label
                            for="others">Others (Specify):</label></div>
                </div>


                <input type="text" id="others_specify" name="others_specify" placeholder="Specify other languages">
            </div>

            <div class="form-group">
                <label for="qualification" class="required">Academic Qualification:</label>
                <select id="qualification" name="qualification" required>
                    <option value="">Select Qualification</option>
                    <option value="High School">High School</option>
                    <option value="Diploma">Diploma</option>
                    <option value="Bachelor's Degree">Bachelor's Degree</option>
                    <option value="Master's Degree">Master's Degree</option>
                    <option value="Others">Others</option>
                </select>
            </div>

            <div class="form-group">
                <label for="experience">Experience (Max 500 characters):</label>
                <textarea id="experience" name="experience" maxlength="500"></textarea>
            </div>
            <!-- 
            <div class="form-group">
                <label for="portrait" class="required">Portrait Picture (Max 1MB):</label>
                <input type="file" id="portrait" name="portrait" accept="image/*" required>
                <button type="button" id="camera-button">Take Picture</button>
                <video id="camera-preview" autoplay></video>
            </div> -->

            <div class="form-group">
                <label for="cv">CV Attachment (Optional):</label>
                <input type="file" id="cv" name="cv" accept=".pdf,.doc,.docx">
            </div>
            <div class="form-group">
                <label for="otherAttachment">Other Attachment (Optional):</label>
                <input type="file" id="otherAttachment" name="otherAttachment" accept=".pdf,.doc,.docx, image/*">
            </div>

            <div class="form-group">
                <button type="submit">Submit Application</button>
                <p id="error-message"></p>
            </div>
        </form>
    </div>



    <script>
        document.getElementById('jobForm').addEventListener('submit', function (event) {
            const portraitInput = document.getElementById('portrait');
            const errorMessage = document.getElementById('error-message');
            errorMessage.textContent = "";

            if (portraitInput.files.length > 0) {
                if (portraitInput.files[0].size > 1000000) {
                    errorMessage.textContent = "Portrait picture must be 1MB or less.";
                    event.preventDefault();
                }
            }
        });

        document.getElementById('camera-button').addEventListener('click', async function () {
            const video = document.getElementById('camera-preview');
            const portraitInput = document.getElementById('portrait');

            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
                video.style.display = 'block';

                const capture = () => {
                    const canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    const context = canvas.getContext('2d');
                    context.drawImage(video, 0, 0, canvas.width, canvas.height);
                    canvas.toBlob((blob) => {
                        const file = new File([blob], 'captured.jpg', { type: 'image/jpeg' });
                        const dataTransfer = new DataTransfer();
                        dataTransfer.items.add(file);
                        portraitInput.files = dataTransfer.files;
                        video.srcObject.getVideoTracks().forEach(track => track.stop());
                        video.style.display = 'none';
                    }, 'image/jpeg');
                };

                const captureButton = document.createElement('button');
                captureButton.textContent = 'Capture';
                captureButton.addEventListener('click', capture);
                video.parentNode.insertBefore(captureButton, video.nextSibling);

                video.addEventListener('ended', () => {
                    captureButton.remove();
                });

            } catch (err) {
                console.error('Error accessing camera:', err);
                alert('Could not access camera.');
            }
        });

        document.getElementById('portrait').addEventListener('change', function (event) {
            const portraitView = document.getElementById('portrait-view');
            portraitView.innerHTML = ''; // Clear any existing content

            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.style.maxWidth = '100%';
                    img.style.maxHeight = '100%';
                    portraitView.appendChild(img);
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
</body>

</html>